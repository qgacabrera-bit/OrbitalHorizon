<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>AI Workbench - Orbital Horizon</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dataprocess.css">
    <link rel="stylesheet" href="planet-info.css"> <!-- Styles for tooltips -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
</head>
<body>

    <div class="loading-screen">
        <div class="spinner-container">
            <div class="spinner"></div>
            <img src="https://i.imgur.com/YZwEU6F.png" alt="Logo" class="spinner-logo">
        </div>
        <p class="loading-text">Entering the cosmos...</p>
    </div>

    <div class="video-background-container">
        <video src="https://github.com/qgacabrera-bit/OrbitalHorizon/raw/refs/heads/main/assets/1%20(1).mp4" autoplay loop muted playsinline></video>
    </div>
    <a href="index.html" class="logo-container">
        <img src="https://i.imgur.com/YZwEU6F.png" alt="Orbital Horizon Logo" class="logo">
    </a>

    <nav class="top-nav">
        <ul>
            <li><a href="index.html" class="nav-link"><i class="fas fa-home"></i> Home</a></li>
            <li><a href="data-processing.html" class="nav-link active"><i class="fas fa-flask"></i> AI Workbench</a></li>
            <li><a href="planet.html" class="nav-link"><i class="fas fa-meteor"></i> Interactive Simulator</a></li>
            <li><a href="team.html" class="nav-link"><i class="fas fa-users"></i> The Team</a></li>
        </ul>
    </nav>

    <main class="content-main">
        <section id="data-processing" class="processing-section">
            <h2 class="section-title">AI Workbench</h2>
            <p class="section-intro">
                Welcome to the AI Workbench. Upload a dataset of potential exoplanet candidates, or use one of our samples below. Here you can preprocess data, train a new model, or use pre-trained models to discover new planets from NASA's vast collection of data.
            </p>

                        <!-- === SINGLE PREDICTION PANEL === -->
            <div id="single-prediction-panel" class="control-panel column collapsible-panel">
                <div class="results-header" id="single-prediction-header">
                    <h4>Single Object Prediction</h4>
                    <button class="toggle-results-btn" title="Toggle Panel"><i class="fas fa-chevron-up"></i></button>
                </div>
                <div id="single-prediction-body">
                    <p>Enter the parameters of a celestial object to get an instant prediction from our pre-trained model.</p>
                    <div id="single-prediction-form" class="hyperparam-group">
                        <label>Planet Radius (Earth Radii):
                            <span class="info-icon" data-tooltip="The radius of the planet, measured in multiples of Earth's radius (e.g., 1.0 is the same size as Earth)."><i class="fas fa-info-circle"></i></span>
                            <input type="number" id="sp-radius" placeholder="1.0">
                        </label>
                        <label>Eq. Temperature (Â°C):
                            <span class="info-icon" data-tooltip="The planet's equilibrium temperature in Celsius. This is a theoretical temperature if heated only by its star."><i class="fas fa-info-circle"></i></span>
                            <input type="number" id="sp-temp" placeholder="15">
                        </label>
                        <label>Insolation (Earth Flux):
                            <span class="info-icon" data-tooltip="The amount of radiation the planet receives from its star, relative to what Earth receives from the Sun."><i class="fas fa-info-circle"></i></span>
                            <input type="number" id="sp-insol" placeholder="1.0">
                        </label>
                        <label>Orbital Period (days):
                            <span class="info-icon" data-tooltip="The number of Earth days it takes for the planet to complete one full orbit around its host star."><i class="fas fa-info-circle"></i></span>
                            <input type="number" id="sp-period" placeholder="365">
                        </label>
                        <label>Stellar Temperature (K):
                            <span class="info-icon" data-tooltip="The surface temperature of the host star in Kelvin. For reference, our Sun's temperature is about 5778 K."><i class="fas fa-info-circle"></i></span>
                            <input type="number"id="sp-stellar-temp" placeholder="5778">
                        </label>
                        <label>Stellar Radius (Solar Radii):
                            <span class="info-icon" data-tooltip="The radius of the host star, measured in multiples of our Sun's radius (e.g., 1.0 is the same size as the Sun)."><i class="fas fa-info-circle"></i></span>
                            <input type="number" id="sp-stellar-radius" placeholder="1.0">
                        </label>
                    </div>
                    <div id="single-prediction-validation-error" class="validation-error" style="display: none;"></div>
                    <div class="action-buttons">
                        <button id="singlePredictBtn">Predict</button>
                        <button id="clearSinglePredictBtn" class="secondary-btn">Clear</button>
                    </div>
                </div>
                <div id="single-prediction-result" style="display: none;"></div>
            </div>

            <!-- === SAMPLE DATASETS === -->
            <div class="sample-data-panel">
                <h4>Don't have a dataset? Try one of ours.</h4>
                <p>Run a sample dataset to see the AI Workbench in action, or download the CSV to use it yourself.</p>
                <p>Curious about the steps involved? See our <a href="index.html#methodology" class="sim-link">methodology</a> to understand how we process the data from start to finish.</p>
                <div class="sample-controls">
                    <select id="sampleDatasetSelect" class="sample-select">
                        <option value="kepler">Kepler Dataset</option>
                        <option value="k2">K2 Dataset</option>
                        <option value="tess">TESS Dataset</option>
                    </select>
                    <button id="runSampleBtn" class="sample-link-btn">
                        <i class="fas fa-play-circle"></i> Run Selected
                    </button>
                    <a id="downloadSampleLink" href="https://project-oracle.onrender.com/download_sample/kepler" class="sample-link-btn">
                        <i class="fas fa-download"></i> Download Selected
                    </a>
                </div>
            </div>


            <!-- === CONTROL PANELS === -->
            <div id="uploadSection" class="control-panel">
              <label for="fileInput" class="file-upload-label">
                <i class="fas fa-file-csv"></i> Choose CSV File
              </label>
              <input type="file" id="fileInput" accept=".csv" style="display: none;">
              <span id="fileName">No file chosen</span>
              <button id="uploadBtn" disabled>Upload & Process</button>
            </div>

            <div id="trainControlsSection" class="control-panel" style="display:none;">
              <div class="train-controls">
                <label for="modelSelect">Select Model:</label>
                <select id="modelSelect">
                  <option value="xgb">XGBClassifier</option>
                  <option value="lgbm">LGBMClassifier</option>
                </select>
              </div>
              <div id="tuneXGBContainer" class="toggle-container" style="display: none;">
                <label for="tuneXGBCheckbox">Tune Hyperparameters</label>
                <input type="checkbox" id="tuneXGBCheckbox">
              </div>
              <div id="xgbParams" class="hyperparam-group" style="display:none;">
                <label>N Estimators:
                  <span class="info-icon" data-tooltip="The number of boosting rounds or trees to build. Higher values can improve accuracy but increase training time."><i class="fas fa-info-circle"></i></span>
                  <input type="number" id="nEstimators" placeholder="100">
                </label>
                <label>Max Depth:
                  <span class="info-icon" data-tooltip="The maximum depth of each tree. Deeper trees capture more complex patterns but risk overfitting."><i class="fas fa-info-circle"></i></span>
                  <input type="number" id="maxDepth" placeholder="3">
                </label>
                <label>Learning Rate:
                  <span class="info-icon" data-tooltip="Step size for each boosting round. A lower value makes the model more robust but requires more estimators."><i class="fas fa-info-circle"></i></span>
                  <input type="number" step="0.01" id="learningRate" placeholder="0.1">
                </label>
              </div>
              <div class="upload-model-group">
                <label for="modelFileInput" class="file-upload-label small">
                  <i class="fas fa-upload"></i> Upload Custom Model
                </label>
                <input type="file" id="modelFileInput" accept=".pkl" style="display: none;">
                <span id="modelFileName">No model chosen</span>
                <button id="predictWithCustomBtn" disabled>Predict with Uploaded Model</button>
              </div>
              <div class="action-buttons">
                <button id="predictBtn">Predict with Pre-trained Model</button>
                <button id="trainBtn">Train Model</button>
                <button id="downloadModelBtn" class="success-btn" style="display:none;">Download Trained Model</button>
                <button id="downloadPredictionsBtn" style="display:none;">Download Predictions (CSV)</button>
                <button id="resetBtn" class="danger-btn">Reset Workbench</button>
              </div>
            </div>

            <!-- === RESULTS AREA === -->
            <div id="results-container" style="display: none;">
                <div id="processing-overlay" style="display: none;">
                    <div class="spinner-container"></div>
                    <p id="processing-overlay-text" class="loading-text">Processing...</p>
                </div>

                <div id="preprocessing-container">
                    <div class="results-header" id="preprocessing-header">
                        <h3>Preprocessing Details</h3>
                        <button id="toggle-preprocessing-btn" class="toggle-results-btn" title="Toggle Details"><i class="fas fa-chevron-up"></i></button>
                    </div>
                    <div id="preprocessing-results"></div>
                </div>
                <div id="training-results" class="results-section"></div>
            </div>

        </section>
    </main>

    <div class="chatbot-container">
        <div class="chatbot-icon" onclick="toggleChat()">
            <img src="https://i.imgur.com/RNJizin.png" alt="Chatbot Icon">
        </div>
        <div class="chat-window" id="chat-window">
            <div class="chat-header" id="chat-header">
                <h3>Astra</h3>
                <span class="close-btn" onclick="toggleChat()">&times;</span>
            </div>
            <div class="chat-messages" id="chat-messages">
                <div class="bot-message">Welcome to the AI Workbench! You can upload data, train models, or use our pre-trained ones to find new planets. Let me know if you have any questions about the process!</div>
            </div>
            <div class="question-buttons-container" id="question-buttons-container"></div>
            <div class="chat-input-container">
                <input type="text" id="chat-input" placeholder="Ask a question..." onkeypress="handleKeyPress(event)">
                <button id="send-btn" onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; 2025 Technological Institute of the Philippines</p>
    </footer>
    <script src="script.js"></script>
    <script src="chatbot.js"></script>
    <script src="datascript.js"></script>
</body>
</html>